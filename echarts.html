<!doctype html>
<html lang="zh-CN">

<head>
    <!--[include "./public/head-meta.html"]-->
    <meta charset="utf-8" />
    <!-- 使用最新版的IE浏览器 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 国产浏览器高速模式 -->
    <meta name="renderer" content="webkit">
    <!-- 在手机上原比例显示，不可以放大缩小 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1, maximum-scale=1" />
    <!-- 则手机号码不被显示为拨号链接 -->
    <meta name="format-detection" content="telephone=no" />
    <!-- iphone设备中的safari私有meta标签，它表示：允许全屏模式浏览 -->
    <meta content="yes" name="apple-mobile-web-app-capable">
    <!-- iphone的私有标签，它指定的iphone中safari顶端的状态条的样式 -->
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <!-- 去除Android平台中对邮箱地址的识别 -->
    <meta content="email=no" name="format-detection" />
    <!-- 清除浏览器中的缓存，它和其它几句合起来用，就可以使你再次进入曾经访问过的页面时，ie浏览器必须从服务端下载最新的内容，达到刷新的效果。 -->
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- 浏览器窗口 图标 -->
    <link rel="shortcut icon" href="images/favicon/favicon-1.ico" type="image/x-icon">
    <!--[/include]-->

    <title>Template-插件开发</title>

    <!--[include "./public/head-link.html"]-->
    <!-- IE 老版本浏览器支持css的新属性 html5shiv 支持 html5标签 respond 支持 @media 媒体查询 -->
    <!--[if lt IE 10]>
        <script src="vendor/html5/html5shiv.min.js" type="text/javascript"></script>
        <script src="vendor/html5/respond.min.js" type="text/javascript"></script>
    <![endif]-->
    <script type="text/javascript" src="vendor/jquery-1.11.3.min.js"></script>
    <!-- 项目封装 -->
    <script type="text/javascript" src="scripts/widget.min.js"></script>

    <!--
       *
       * 与form表单相关
       *
    -->
    <!-- 输入框input输入内容格式限制插件 -->
    <script type="text/javascript" src="vendor/inputmask/min/jquery.inputmask.bundle.min.js"></script>
    <script type="text/javascript" src="vendor/inputmask/min/inputmask/bindings/inputmask.binding.min.js"></script>
    <!-- 日期处理类库 -->
    <script type="text/javascript" src="vendor/moment/moment.min.js"></script>
    <!-- 时间插件 -->
    <link rel="stylesheet" type="text/css" href="vendor/My97DatePicker/skin/WdatePicker.css">
    <script type="text/javascript" src="vendor/My97DatePicker/WdatePicker.js"></script>
    <!-- 下拉插件 多选 -->
    <link rel="stylesheet" type="text/css" href="vendor/select2-4.0.2/select2.css">
    <script type="text/javascript" src="vendor/select2-4.0.2/select2.js"></script>
    <script type="text/javascript" src="vendor/select2-4.0.2/select2-Initials.js"></script>
    <script type="text/javascript" src="vendor/select2-4.0.2/i18n/zh-CN.js"></script><!-- 中文提示 -->
    <!-- 多选和单选的美化 -->
    <link rel="stylesheet" type="text/css" href="vendor/icheck/icheck.css">
    <script type="text/javascript" src="vendor/icheck/icheck.js"></script>
    <!-- 上传附件的组件 -->
    <link rel="stylesheet" type="text/css" href="vendor/webuploader/diyUpload.css">
    <script type="text/javascript" src="vendor/webuploader/webuploader.js"></script>
    <script type="text/javascript" src="vendor/webuploader/diyUpload.js"></script>
    <!-- 富文本编辑器  -->
    <script type="text/javascript" charset="utf-8" src="vendor/ueditor1_4_3_3-utf8-php/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="vendor/ueditor1_4_3_3-utf8-php/ueditor.all.min.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="vendor/ueditor1_4_3_3-utf8-php/lang/zh-cn/zh-cn.js"></script>
    <!-- ztree的组件 -->
    <link rel="stylesheet" href="vendor/ztree/css/zTreeStyle.css" type="text/css">
    <script type="text/javascript" src="vendor/ztree/jquery.ztree.all-3.5.min.js"></script>
    <!-- 上传头像 -->
    <script src="vendor/photoClip/iscroll-zoom.js"></script>
    <script src="vendor/photoClip/hammer.min.js"></script><!-- 触摸屏的手势 -->
    <script src="vendor/photoClip/lrz.all.bundle.js"></script>
    <script src="vendor/photoClip/jquery.photoClip.js"></script>
    <!-- 表单验证 -->
    <link rel="stylesheet" type="text/css" href="vendor/Validform/Validform_v5.css">
    <script type="text/javascript" src="vendor/Validform/Validform_v5.3.2.js"></script>

    <!--
       *
       * 经常会用到
       *
    -->
    <!-- bootstrap 的 js -->
    <script src="vendor/bootstrap/bootstrap.js"></script>
    <script src="vendor/bootstrap/bootstrap-hover-dropdown.js"></script>
    <!-- echarts美化插件 -->
    <script type="text/javascript" src="vendor/echarts/4.0.4/echarts.min.js"></script>
    <script type="text/javascript" src="vendor/echarts/4.0.4/dark.js"></script>
    <!-- 中国地图数据 --><!-- bmap 自定义系列（custom series） 支持 百度地图插件（bmap） --><!-- 坐标和数据 -->
    <script type="text/javascript" src="vendor/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="vendor/echarts/map/js/province/yunnan.js"></script>
    <script src="./vendor/echarts/map/bmap.js"></script>
    <script src="./vendor/echarts/map/geoCoord.js"></script>
    <!-- 百度地图 -->
    <script src="http://api.map.baidu.com/api?v=3.0&ak=EzDXzjUWeF3Wb9tihrGr2IRvsIddR37G"></script>
    <!-- 使用jQuery监听DOM元素大小变化 -->
    <script type="text/javascript" src="vendor/ba-resize/jquery.ba-resize.js"></script>
    <!-- 轮播图 -->
    <link rel="stylesheet" type="text/css" href="vendor/pgwSlideshow/pgwslideshow.css" />
    <script type="text/javascript" src="vendor/pgwSlideshow/pgwslideshow.js"></script>
    <!-- jquery-ui-abridged 由于jq-ui的方法很多用不上还会占用资源和与别的插件冲突，把不用的移除了 -->
    <script type="text/javascript" src="vendor/jquery-ui-1.9.2/jquery-ui-abridged.js"></script>
    <!-- 响应式图片 picture标签 解决IE等浏览器不支持 的问题 -->
    <script type="text/javascript" src="vendor/picturefill/picturefill.min.js"></script>
    <!-- js实现复制到剪贴板功能，兼容所有浏览器 -->
    <script type="text/javascript" src="vendor/clipboard/clipboard.min.js"></script>
    <!-- jQuery图片延迟加载插件jQuery.lazyload -->
    <script type="text/javascript" src="vendor/jquery.lazyload/jquery.lazyload.js"></script>

    <!-- 导出 XLS XLSX XML JSON PDF PNG等 -->
    <script type="text/javascript" src="vendor/tableExport/libs/FileSaver/FileSaver.min.js"></script>
    <script type="text/javascript" src="vendor/tableExport/libs/js-xlsx/xlsx.core.min.js"></script>
    <script type="text/javascript" src="vendor/tableExport/tableExport.js"></script>
    <!-- 两种字体图标 -->
    <link rel="stylesheet" type="text/css" href="fonts/glyphicons/css/glyphicons.css" />
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css" />
    <!-- css3 动画库 -->
    <link rel="stylesheet" type="text/css" href="styles/animate.css" />

    <!--
       *
       * 基本不会使用
       *
    -->
    <!-- h5量子背景 -->
    <script type="text/javascript" src="vendor/quantum.js"></script>
    <!-- 显示代码插件 -->
    <link rel="stylesheet" href="vendor/prismjs/prism-coy.css">
    <script src="vendor/prismjs/prism.js" defer async></script>

    <!--
       *
       * 放到最后
       *
    -->
    <!-- 项目需求的特殊样式 -->
    <link rel="stylesheet" type="text/css" href="styles/css/global.css" />
    <link rel="stylesheet" type="text/css" href="styles/css/item.css" />
    <script type="text/javascript" src="scripts/common.min.js"></script>
    <!--[/include]-->


    <!-- 开发插件用的临时文件 -->
    <script type="text/javascript" src="plugin/myplugin.js"></script>



</head>
<body class="page-bg-default">
    <!-- page-container start -->
    <section id="page-container">

        <!-- page-header start -->
        <!--[include "./public/page-header.html"]-->
        <header id="page-header">
            <div class="header-top">
                <div class="mine">
                    <a class="mine-list" href="javascript:;">
                        <span>王升库</span>
                   </a>
                    <a class="mine-list" href="javascript:;">
                        <i class="fa fa-cog"></i>
                        <span>个人设置</span>
                    </a>
                    <a class="mine-list" href="javascript:;">
                        <i class="fa fa-power-off"></i>
                        <span>退出系统</span>
                    </a>
               </div>
            </div>
            <div class="header-navbar">
                <div class="logo">
                    <a href="index.html"><img src="images/logo-fchsoft.png" alt=""></a>
                </div>

                <nav class="header-nav">
                    <div class="header-pane">
                        <div class="header-menu">
                            <a class="header-menu-item active" href="index.html"><span>首页</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>安全管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>安全预警</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>应急处置</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>生产指挥</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>生产分析</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>部门考核</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>干部履职</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>簿册管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>施工管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>设备管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>基础管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>安全管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>安全预警</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>应急处置</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>生产指挥</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>生产分析</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>部门考核</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>干部履职</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>簿册管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>施工管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>设备管理</span></a>
                            <a class="header-menu-item" href="javascript:;"><span>基础管理-l</span></a>
                        </div>
                    </div>
                    <div class="header-pane-toggle"><i class="icon"></i></div>
                </nav>
            </div>
        </header>
        <!--[/include]-->
        <!-- page-header end -->

        <!-- page-bodier start -->
        <article id="page-bodier">
            <!-- sidebar start -->
            <aside id="sidebar">
                <!--[include "./public/page-left-nav.html"]-->
                <div class="left-nav left-nav-default" data-toggle="left-nav">
                    <ul>
                        <li><a href="index.html"><i class="icon icon-books"></i>index<i class="caret caret-up"></i></a>
                            <ul>
                                <li><a href="index.html#flying">与双飞翼布局相关的</a></li>
                                <li><a href="index.html#flexbox">flexbox布局</a></li>
                                <li><a href="index.html#grid">与栅格系统相关的</a></li>
                                <li><a href="index.html#panel">panel面版</a></li>
                                <li><a href="index.html#toggle">toggle 显示隐藏</a></li>
                                <li><a href="index.html#section">boxes 盒 section 模块</a></li>
                                <li><a href="index.html#breadcrumb">路径导航</a></li>
                                <li><a href="index.html#nav">nav</a></li>
                                <li><a href="index.html#title">标题相关的</a></li>
                                <li><a href="index.html#article">article 文章</a></li>
                                <li><a href="index.html#describe">describe 描述</a></li>
                                <li><a href="index.html#list">list 列表</a></li>
                                <li><a href="index.html#Alert">Alert 警告</a></li>
                                <li><a href="index.html#text-list">text-list 文字列表</a></li>
                                <li><a href="index.html#tag">tag 标签</a></li>
                                <li><a href="index.html#badge">badge 徽章</a></li>
                                <li><a href="index.html#rating">rating 评分</a></li>
                                <li><a href="index.html#btn">与 按钮 相关的</a></li>
                                <li><a href="index.html#callout">callout</a></li>
                                <li><a href="index.html#step">流程进度条</a></li>
                                <li><a href="index.html#progress">进度条</a></li>
                                <li><a href="index.html#range">range 滑动条</a></li>
                                <li><a href="index.html#divider">与横向分隔条相关的</a></li>
                                <li><a href="index.html#media">与媒体对象相关的</a></li>
                                <li><a href="index.html#pagination">与分页器相关的</a></li>
                                <li><a href="index.html#card">card 卡片</a></li>
                                <li><a href="index.html#list-item"> list（列表）</a></li>
                                <li><a href="index.html#timeline">与 时间轴 相关的</a></li>
                                <li><a href="index.html#clipboard">复制到剪贴板功能</a></li>
                                <li><a href="index.html#smartMenu">鼠标右键菜单</a></li>
                                <li><a href="index.html#iframe">iframe 引入页</a></li>
                            </ul>
                        </li>
                        <li><a href="table.html"><i class="icon icon-books"></i>table</a></li>
                        <li><a href="form.html"><i class="icon icon-books"></i>form</a></li>
                        <li><a href="text.html"><i class="icon icon-books"></i>text 文字相关的</a></li>
                        <li><a href="bootstrap.html"><i class="icon icon-books"></i>bootstrap</a></li>
                        <li><a href="icons.html"><i class="icon icon-books"></i>icons</a></li>

                        <li><a href="widget.html"><i class="icon icon-books"></i>widget</a></li>
                        <li><a href="Container.html"><i class="icon icon-books"></i>Container</a></li>
                        <li><a href="sublime3-config.html"><i class="icon icon-books"></i>配置sublime3的插件</a></li>
                        <li><a href="javascript:;"><i class="icon icon-books"></i>帮助文件</a>
                            <ul>
                                <li><a href="帮助文档-项目规则.html">项目规则</a></li>
                                <li><a href="帮助文档-修改日志.html">修改日志</a></li>
                                <li><a href="帮助文档-英文单词.html">英文单词</a></li>
                                <li><a href="帮助文档-辅助类.html">辅助类</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <script type="text/javascript">
                    // 左导航进行添加选中
                    var arrUrl = window.location.href.split("/");
                    var pageText = arrUrl[arrUrl.length - 1];
                    if ( pageText.indexOf("?") !== -1 ) {
                        pageText = pageText.split("?")[0];
                    }else if ( pageText.indexOf("#") !== -1 ) {
                        pageText = pageText.split("#")[0];
                    }
                    $('[data-toggle="left-nav"] li>a').each(function(index, el) {
                        var pageBtn = $(el).attr('href');
                        if ( pageText == pageBtn ) {
                            $(el).addClass('active');
                            return false;
                        }
                    });
                </script>
                <!--[/include]-->
            </aside>
            <!-- sidebar end -->
            <!-- content start -->
            <main id="content">
                <div id="wrapper">
                    <div class="content-wrap">

                        <!-- 柱形图和线形图 start -->
                        <section class="panel">
                            <div class="panel-head">
                                <div class="panel-inner">
                                    <h2 class="panel-title">柱形图和线形图 主题配置</h2>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="echarts-item" id="echarts-a" style="height: 620px;"></div>
                            </div>
                        </section>
                        <!-- 柱形图和线形图 end -->

                        <!-- 云南被攻击图 start -->
                        <section class="panel">
                            <div class="panel-head">
                                <div class="panel-inner">
                                    <h2 class="panel-title">云南被攻击图</h2>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="echarts-item" id="echarts-b" style="height: 620px;"></div>
                            </div>
                        </section>
                        <!-- 云南被攻击图 end -->

                        <!-- 飞机飞行图 start -->
                        <section class="panel">
                            <div class="panel-head">
                                <div class="panel-inner">
                                    <h2 class="panel-title">飞机飞行图</h2>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="echarts-item" id="echarts-c" style="height: 620px;"></div>
                            </div>
                        </section>
                        <!-- 飞机飞行图 end -->

                        <!-- 百度地图和echarts 迁徙图 start -->
                        <section class="panel">
                            <div class="panel-head">
                                <div class="panel-inner">
                                    <h2 class="panel-title">百度地图和echarts 迁徙图</h2>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="echarts-item" id="echarts-d" style="height: 620px;"></div>
                            </div>
                        </section>
                        <!-- 百度地图和echarts 迁徙图 end -->


                    </div>
                </div>
            </main>
            <!-- content end -->
        </article>
        <!-- page-bodier end -->
    </section>
    <!-- page-container end -->
    <script type="text/javascript">
        $(function() {
            var myChart = echarts.init(document.getElementById('echarts-a'),'dark');
            var options = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    top: 20,
                    textStyle:{
                        color: '#ffffff'
                    },
                    data:['蒸发量','降水量','平均温度']
                },
                color:["#890db2"],
                backgroundColor: '#031324',
                xAxis: [
                    {
                        type: 'category',
                        data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
                        // 指示器
                        axisPointer: {
                            type: 'shadow'
                        },
                        // 轴
                        axisLine: {
                            lineStyle:{
                                color: '#ffffff'
                            }
                        },
                        // 小刻度
                        axisTick:{
                            show: false,
                            lineStyle:{
                                color: '#f00'
                            }
                        },
                        // 文字
                        axisLabel:{
                            color: '#ffffff'
                        }
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        // 轴
                        axisLine: {
                            lineStyle:{
                                color: '#ffffff'
                            }
                        },
                        // 小刻度
                        axisTick:{
                            show: false,
                            lineStyle:{
                                color: '#f00'
                            }
                        },
                        // 文字
                        axisLabel:{
                            color: '#ffffff'
                        },
                        splitLine:{
                            lineStyle:{
                                color: '#43505d'
                            }
                        }
                    }
                ],
                series: [
                    {
                        name:'蒸发量',
                        type:'bar',
                        stack: '总量',
                        barWidth: '18',
                        itemStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(
                                    0, 0, 0, 1,
                                    [
                                        {offset: 0, color: '#285297'},
                                        {offset: 1, color: '#0b2b9c'}
                                    ]
                                )
                            }
                        },
                        data:[20, 49, 70, 23, 25, 17, 10, 20, 30, 20.0, 6.4, 13.3]
                    },
                    {
                        name:'降水量',
                        type:'bar',
                        stack: '总量',
                        barWidth: '18',
                        itemStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(
                                    0, 0, 0, 1,
                                    [
                                        {offset: 0, color: '#13b1bd'},
                                        {offset: 1, color: '#0c323d'}
                                    ]
                                )
                            }
                        },
                        data:[26, 60, 90, 26, 28, 77, 20, 30, 30, 18.8, 6.0, 12.3]
                    },
                    {
                        name:'平均温度',
                        type:'line',
                        data:[46, 109, 160, 49, 53, 94, 30, 50, 60, 38.8, 12.4, 25.6],
                        markPoint: {
                            symbol: 'pin',
                            itemStyle:{
                                normal:{
                                    color:'rgba(255, 0, 0, 0.54)'
                                }
                            },
                            data: [
                                {type: 'max', name: '最大值'}
                            ]
                        }
                    }
                ]
            };
            myChart.setOption(options);
        });
    </script>

    <script type="text/javascript">
        $(function() {
            /**
             * 散点数据
             * @type {Array}
             */
            var markData = [
                {'name': '昆明', 'value': 900 },
                {'name': '曲靖', 'value': 56 },
                {'name': '玉溪', 'value': 812 },
                {'name': '昭通', 'value': 865 },
                {'name': '保山', 'value': 44 },
                {'name': '丽江', 'value': 95 },
                {'name': '普洱市', 'value': 43 },
                {'name': '临沧', 'value': 60 },
                {'name': '德宏傣族景颇族自治州', 'value': 30 },
                {'name': '怒江傈僳族自治州', 'value': 56 },
                {'name': '迪庆藏族自治州', 'value': 66 },
                {'name': '大理白族自治州', 'value': 78 },
                {'name': '楚雄彝族自治州', 'value': 886 },
                {'name': '红河哈尼族彝族自治州', 'value': 797 },
                {'name': '文山壮族苗族自治州', 'value': 23 },
                {'name': '西双版纳傣族自治州', 'value': 28 }
            ];
            /**
             * 攻击线路数据
             * @type {Array}
             */
            var attackData = [
                {
                    "from": {"name":"北京"},
                    "to": {"name":"昆明","value":811}
                },{
                    "from": {"name":"上海"},
                    "to": {"name":"昭通","value":812}
                },{
                    "from": {"name":"辽宁"},
                    "to": {"name":"临沧","value":813}
                }
            ];

            /**
             * 散点2的数据处理
             * @type {Array}
             */
            var attackedData = [
                {'name': '昆明', 'value': 900 },
                {'name': '曲靖', 'value': 56 },
                {'name': '玉溪', 'value': 812 },
                {'name': '昭通', 'value': 865 },
                {'name': '保山', 'value': 44 },
                {'name': '丽江', 'value': 95 },
                {'name': '普洱市', 'value': 43 },
                {'name': '临沧', 'value': 60 },
                {'name': '德宏傣族景颇族自治州', 'value': 30 },
                {'name': '怒江傈僳族自治州', 'value': 56 },
                {'name': '迪庆藏族自治州', 'value': 66 },
                {'name': '大理白族自治州', 'value': 78 },
                {'name': '楚雄彝族自治州', 'value': 886 },
                {'name': '红河哈尼族彝族自治州', 'value': 797 },
                {'name': '文山壮族苗族自治州', 'value': 23 },
                {'name': '西双版纳傣族自治州', 'value': 28 }
            ];
            var attackedData2 = [];
            attackedData.forEach(function(item, index) {
                var returnType = true;
                for (var i = 0; i < attackData.length; i++) {
                    if( attackData[i].to.name == item.name){
                        returnType = false;
                        return false;
                    }
                }
                if( returnType ){
                    attackedData2.push(item);
                }
            });

            var myChart = echarts.init(document.getElementById('echarts-b'));
            // 整理数据方法
            function convertData(data) {
                var res = [];
                for(var i = 0; i < data.length; i++) {
                    var dataItem = data[i];
                    var fromCoord = geoCoordMap[dataItem.from.name];
                    var toCoord = geoCoordMap[dataItem.to.name];
                    if(fromCoord && toCoord) {
                        res.push({
                            fromName: dataItem.from.name,
                            toName: dataItem.to.name,
                            coords: [fromCoord, toCoord],
                            consdata: dataItem.to.value
                        });
                    }
                }
                return res;
            };

            var options = {
                backgroundColor: "#080d1d",
                visualMap: {
                    show: true,
                    min: 0,
                    max: 1000,
                    left: 20,
                    bottom: 20,
                    itemWidth: 12,
                    itemHeight: 120,
                    text: ['高','低'],
                    textStyle:{
                        color: '#7a869d',
                    },
                    calculable: true, // 7a869d
                    seriesIndex: [0],
                    color:['#0e384e', '#299ed9']
                },
                geo: {
                    map: '云南',
                    zoom: 1.2, // 地图的大小
                    roam: false
                },
                series: [
                    {
                        name: '地图', 
                        type: 'map',
                        mapType: '云南',
                        zoom: 1.2,
                        label: {
                            normal: {
                                show: true,
                                color: '#0b1a25'
                            },
                            emphasis: {
                                show: true,
                                color: '#0b1a25'
                            }
                        },
                        itemStyle: {
                            normal: {
                                areaColor: '#299ed9',
                                borderColor: '#1aabe1',
                                borderWidth: 1
                            },
                            emphasis: {
                                areaColor: '#0e384e'
                            }
                        },
                        data: markData
                    },
                    {
                        name: '散点',
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        zlevel: 2,
                        rippleEffect: { // 涟漪特效相关配置
                            brushType: 'stroke'
                        },
                        label: {
                            normal: {
                                show: true,
                                position: 'right',
                                formatter: '{b}'
                                // formatter: function(params) {
                                //     return params.value[2];
                                // }
                            }
                        },
                        symbolSize: function (val,params) {
                            if( val[2]>100 ){
                                return val[2] / 80;
                            }else if( val[2]>1000 ){
                                return val[2] / 800;
                            }else {
                                return val[2] / 8;
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: '#ffcc00',
                                shadowColor: '#ffcc00',
                                shadowBlur: 10
                            }
                        },
                        data: attackData.map(function (item) {
                            return {
                                name: item.to.name,
                                value: geoCoordMap[item.to.name].concat([item.to.value])
                            };
                        })
                    },
                    // 攻击数据
                    {
                        name: '攻击效果',
                        type: 'lines',
                        zlevel: 1,
                        effect: {
                            show: true,
                            period: 6, // 特效动画的时间，单位为 s。
                            trailLength: 0.5,
                            color: '#ffcc00',
                            symbolSize: 3
                        },
                        lineStyle: {
                            normal: {
                                color: '#ffcc00',
                                width: 0,
                                // 边的曲度，支持从0到1的值，值越大曲度越大
                                curveness: 0.2
                            }
                        },
                        data: convertData(attackData)
                    },
                    {
                        name: '被攻击的点',
                        type: 'scatter',
                        coordinateSystem: 'geo',
                        zlevel: 1,
                        symbolSize: function (val) {
                            console.log(val);
                            let n = val[2] / 50;
                            if( n > 10 ){
                                n = 10;
                            }else if( n < 6 ){
                                n = 6;
                            }
                            return n;
                        },
                        itemStyle: {
                            normal: {
                                color: '#ff368b',
                                borderColor: '#88eef9',
                                borderWidth: 2
                            }
                        },
                        data: attackedData2.map(function (item) {
                            return {
                                name: item.name,
                                value: geoCoordMap[item.name].concat([item.value])
                            }  
                        })
                    }
                ]
            };
            myChart.setOption(options);
        });
    </script>
    <script type="text/javascript">
        $(function() {

            var myChart = echarts.init(document.getElementById('echarts-c'));
            
            // 获取到的数据
            var CityData = [
                {
                    "from": {"name":"西安", value: 1000},
                    "to": [
                        [{name:'西安'}, {name:'北京',value:1000}],
                        [{name:'西安'}, {name:'上海',value:1000}],
                        [{name:'西安'}, {name:'广州',value:1000}],
                        [{name:'西安'}, {name:'西宁',value:1000}],
                        [{name:'西安'}, {name:'银川',value:1000}]
                    ]
                },
                {
                    "from": {"name":"西宁", value: 1000},
                    "to": [
                        [{name:'西宁'}, {name:'北京',value:1000}],
                        [{name:'西宁'}, {name:'上海',value:1000}],
                        [{name:'西宁'}, {name:'广州',value:1000}],
                        [{name:'西宁'}, {name:'西安',value:1000}],
                        [{name:'西宁'}, {name:'银川',value:1000}]
                    ]
                },
                {
                    "from": {"name":"银川", value: 1000},
                    "to": [
                        [{name:'银川'}, {name:'北京',value:1000}],
                        [{name:'银川'}, {name:'广州',value:1000}],
                        [{name:'银川'}, {name:'上海',value:900}],
                        [{name:'银川'}, {name:'西安',value:800}],
                        [{name:'银川'}, {name:'西宁',value:1000}],
                        [{name:'银川'}, {name:'乌鲁木齐',value:1000}],
                    ]
                },
                {
                    "from": {"name":"哈尔滨", value: 1000},
                    "to": [
                        [{name:'哈尔滨'}, {name:'北京',value:100}],
                        [{name:'哈尔滨'}, {name:'广州',value:100}]
                    ]
                },
                {
                    "from": {"name":"广州", value: 1000},
                    "to": [
                        [{name:'广州'}, {name:'哈尔滨',value:100}]
                    ]
                },
                {
                    "from": {"name":"乌鲁木齐", value: 1000},
                    "to": [
                        [{name:'乌鲁木齐'}, {name:'银川',value:100}]
                    ]
                },
                {
                    "from": {"name":"北京", value: 1000},
                    "to": []
                },
                {
                    "from": {"name":"上海", value: 1000},
                    "to": []
                }
            ];

            // 飞机形状
            var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';
            /**
             * 数据整理
             */
            function convertData(data) {
                var res = [];
                for(var i = 0; i < data.length; i++) {
                    var dataItem = data[i];
                    var fromCoord = geoCoordMap[dataItem[0].name];
                    var toCoord = geoCoordMap[dataItem[1].name];
                    if(fromCoord && toCoord) {
                        res.push({
                            fromName: dataItem[0].name,
                            toName: dataItem[1].name,
                            coords: [fromCoord, toCoord],
                            consdata: dataItem[1].value
                        });
                    }
                }
                return res;
            };

            // 航线的颜色
            var color = ['#179da5', '#f4b068', '#f08b7b', '#9fe4b3', '#4b90c8', '#890db2', '#3ed4ff'];
            var series = [];
            var legend = [];
            CityData.forEach(function (item, i) {
                legend.push( item.from.name );
                series.push(
                    // 飞机后面的运动影子
                    {
                        name: item.from.name,
                        type: 'lines',
                        zlevel: 1,
                        effect: {
                            show: true,
                            period: 6,
                            trailLength: 0.7,
                            color: 'red',   // arrow箭头的颜色
                            symbolSize: 3
                        },
                        lineStyle: {
                            normal: {
                                color: color[i],
                                width: 0,
                                curveness: 0.2
                            }
                        },
                        data: convertData(item.to)
                    },
                    // 飞机线路
                    {
                        name: item.from.name,
                        type: 'lines',
                        zlevel: 2,
                        symbol: ['none', 'arrow'],
                        symbolSize: 10, 
                        effect: {
                            show: true,
                            period: 6,
                            trailLength: 0,
                            symbol: planePath,
                            symbolSize: 15
                        },
                        lineStyle: {
                            normal: {
                                color: color[i],
                                width: 1,
                                opacity: 0.6,
                                curveness: 0.2
                            }
                        },
                        data: convertData(item.to)
                    },
                    {
                        name: item.from.name,
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        zlevel: 5,
                        rippleEffect: {
                            brushType: 'stroke'
                        },
                        label: {
                            normal: {
                                show: true,
                                position: 'right',
                                formatter: '{b}'
                            }
                        },
                        symbolSize: function (val,params) { // 设置地图闪烁点的大小
                            if( val[2]>100 ){
                                return val[2] / 80;
                            }else if( val[2]>1000 ){
                                return val[2] / 800;
                            }else {
                                return val[2] / 8;
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: color[i],
                            },
                            emphasis: {
                                areaColor: '#2B91B7'
                            }
                        },
                        data:[
                            {
                                name: item.from.name,
                                value: geoCoordMap[item.from.name].concat([item.from.value])
                            }
                        ]
                    }
                );
            });
            console.log(series);
            var options = {
                legend: {
                    orient: 'vertical',
                    top: 10,
                    left: 10,
                    data: legend,
                    textStyle: {
                        color: '#fff'
                    },
                    selectedMode: 'multiple'
                },
                backgroundColor: '#013954',
                tooltip : {
                    trigger: 'item', 
                    formatter:function(params, ticket, callback){
                        if(params.seriesType=="effectScatter") {
                            return params.data.name+":"+params.data.value[2];
                        }else if(params.seriesType=="lines"){
                            return "线路："+params.data.fromName+">"+params.data.toName+"<br />"+params.data.consdata;
                        }else{
                            return params.name;
                        }
                    } 
                },
                geo: {
                    map: 'china',
                    label: {
                        normal: {
                            show: true,
                            color:'#4d6785'
                        },
                        emphasis: { // 鼠标经过省的文字颜色
                            show: true,
                            color:'#fff'
                        }
                    },
                    zoom: 1.2,
                    roam: true, //是否允许缩放
                    itemStyle: {
                        normal: {
                            color: 'rgba(51, 69, 89, .5)', //地图背景色
                            borderColor: '#516a89', //省市边界线00fcff 516a89
                            borderWidth: 1
                        },
                        emphasis: {
                            color: 'rgba(37, 43, 61, .5)' //悬浮背景
                        }
                    }
                },
                series: series
            };
            myChart.setOption(options);
        });
    </script>

    <script type="text/javascript">
        $(function(){
            /**
             * echarts结合百度地图使用--热力图
             * https://www.jianshu.com/p/deaf251f7e57
             * 可以参考
             */

            /**
             * echarts 迁徙图所需的数据
             * 1.获取数
             * 2.数据赋值
             * 3.数据整理
             */
            
            
            // 1
            var allProviance = [  // 中国行政区信息
                {
                    cityname: "北京",
                    itemvalue: 1
                },
                {
                    cityname: "天津",
                    itemvalue: 2
                },
                {
                    cityname: "上海",
                    itemvalue: 3
                },
                {
                    cityname: "重庆",
                    itemvalue: 4
                },
                {
                    cityname: "河北",
                    itemvalue: 5
                },
                {
                    cityname: "山西",
                    itemvalue: 6
                },
                {
                    cityname: "辽宁",
                    itemvalue: 7
                },
                {
                    cityname: "吉林",
                    itemvalue: 8
                },
                {
                    cityname: "黑龙江",
                    itemvalue: 9
                }, 
                {
                    cityname: "江苏",
                    itemvalue: 10
                },
                {
                    cityname: "浙江",
                    itemvalue: 11
                },
                {
                    cityname: "安徽",
                    itemvalue: 12
                },
                {
                    cityname: "福建",
                    itemvalue: 13
                },
                {
                    cityname: "江西",
                    itemvalue: 14
                },
                {
                    cityname: "山东",
                    itemvalue: 15
                },
                {
                    cityname: "河南",
                    itemvalue: 16
                },
                {
                    cityname: "湖北",
                    itemvalue: 17
                },
                {
                    cityname: "湖南",
                    itemvalue: 18
                },
                {
                    cityname: "广东",
                    itemvalue: 19
                },
                {
                    cityname: "海南",
                    itemvalue: 20
                },
                {
                    cityname: "四川",
                    itemvalue: 21
                },
                {
                    cityname: "贵州",
                    itemvalue: 22
                },
                {
                    cityname: "云南",
                    itemvalue: 23
                },
                {
                    cityname: "陕西",
                    itemvalue: 24
                },
                {
                    cityname: "甘肃",
                    itemvalue: 25
                },
                {
                    cityname: "青海",
                    itemvalue: 26
                },
                {
                    cityname: "台湾",
                    itemvalue: 27
                },
                {
                    cityname: "内蒙古",
                    itemvalue: 28
                },
                {
                    cityname: "广西",
                    itemvalue: 29
                },
                {
                    cityname: "西藏",
                    itemvalue: 30
                },
                {
                    cityname: "宁夏",
                    itemvalue: 31
                },
                {
                    cityname: "新疆",
                    itemvalue: 32
                },
                {
                    cityname: "香港",
                    itemvalue: 33
                },
                {
                    cityname: "澳门",
                    itemvalue: 34
                }
            ];
            var data = {
                "markdata": [
                    {
                        "cityname": "西藏",
                        "itemvalue": 86
                    },
                    {
                        "cityname": "海南",
                        "itemvalue": 85
                    },
                    {
                        "cityname": "吉林",
                        "itemvalue": 80
                    }
                ],
                "lineArr": [
                    {
                        "from": {"cityname":"北京"},
                        "to": {"cityname":"西藏","itemvalue":1}
                    },{
                        "from": {"cityname":"北京"},
                        "to": {"cityname":"海南","itemvalue":2}
                    },{
                        "from": {"cityname":"北京"},
                        "to": {"cityname":"吉林","itemvalue":3}
                    },{
                        "from": {"cityname":"上海"},
                        "to": {"cityname":"北京","itemvalue":3}
                    },{
                        "from": {"cityname":"上海"},
                        "to": {"cityname":"云南","itemvalue":3}
                    },{
                        "from": {"cityname":"台湾"},
                        "to": {"cityname":"新疆","itemvalue":3}
                    },{
                        "from": {"cityname":"贵州"},
                        "to": {"cityname":"山东","itemvalue":30}
                    },{
                        "from": {"cityname":"贵州"},
                        "to": {"cityname":"辽宁","itemvalue":35}
                    },{
                        "from": {"cityname":"贵州"},
                        "to": {"cityname":"吉林","itemvalue":36}
                    },{
                        "from": {"cityname":"贵州"},
                        "to": {"cityname":"黑龙江","itemvalue":39}
                    }
                ],
                "legend": [
                    "Top10"
                ],
                "itemname": "DDOS攻击分布",
                "rangemax": 500
            };
            // 2
            var BJData = data.lineArr;
            var MARKData = data.markdata
            var legend = data.legend;
            var color = ['#36ddf1'];
            var series = [
                // 攻击数据
                {
                    name: legend[0],
                    type: 'lines',
                    coordinateSystem: 'bmap',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[0],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(BJData)
                },
                // 底部蓝色线
                {
                    name: legend[0],
                    type: 'lines',
                    coordinateSystem: 'bmap',
                    zlevel: 2,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0,
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[0],
                            width: 2,
                            opacity: 0.4,
                            curveness: 0.2
                        }
                    },
                    data: convertData(BJData), // 调用 convertData 数据处理函数
                    tooltip: {
                        formatter: function(param) {
                            var warning = ["", "高", "中", "低"]
                            return "从 " + param.data.fromName + " 到 " + param.data.toName + " 的攻击<br/>严重级别: " +
                                warning[param.data.consdata]
                        }
                    }
                },
                // 所有行政显示信息
                {
                    name: legend[0],
                    type: 'scatter',
                    coordinateSystem: 'bmap',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show: true,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function(val) {
                        return 10
                    },
                    itemStyle: {
                        normal: {
                            color: "#3b89cc"
                        }
                    },
                    data: allProviance.map(function(dataItem) {     // geoCoord.js 的数组
                        return {
                            name: dataItem.cityname,
                            value: geoCoordMap[dataItem.cityname].concat([dataItem.itemvalue])
                        };
                    }),
                    tooltip: {
                        formatter: function(param) {
                            return
                        }
                    }
                },
                // 扩散点的坐标
                {
                    name: legend[0],
                    type: 'effectScatter',
                    coordinateSystem: 'bmap',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show: false,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function(val) {
                        //console.log(val)
                        //return val[2] / 8;
                        return 8
                    },
                    itemStyle: {
                        normal: {
                            color: "#3b89cc"
                        }
                    },
                    data: MARKData.map(function(dataItem) {
                        return {
                            name: dataItem.cityname,
                            value: geoCoordMap[dataItem.cityname].concat([dataItem.itemvalue])
                        };
                    }),
                    tooltip: {
                        formatter: function(param) {
                            //return "123"
                        }
                    }
                }
            ];

            // 整理数据方法
            function convertData(data) {
                var res = [];
                for(var i = 0; i < data.length; i++) {
                    var dataItem = data[i];
                    var fromCoord = geoCoordMap[dataItem.from.cityname];
                    var toCoord = geoCoordMap[dataItem.to.cityname];
                    if(fromCoord && toCoord) {
                        res.push({
                            fromName: dataItem.from.cityname,
                            toName: dataItem.to.cityname,
                            coords: [fromCoord, toCoord],
                            consdata: dataItem.to.itemvalue
                        });
                    }
                }
                return res;
            };

            /**
             * echarts 的 option
             */
            option = {
                bmap: {
                    // 地图是否可以缩放
                    roam: true,
                },
                backgroundColor: 'rgba(0,0,0,0)',
                tooltip: {
                    trigger: 'item'
                },
                // 提示
                legend: {
                    show: false,
                    orient: 'vertical',
                    top: 'bottom',
                    left: 'right',
                    data: legend,
                    textStyle: {
                        color: '#fff'
                    },
                    selectedMode: 'single'
                },
                dataRange: {
                    show: false,
                    min: 0,
                    max: 100,
                    x: 'right',
                    calculable: true,
                    color: ['#36ddf1'],
                    textStyle: {
                        color: '#fff'
                    }
                },
                series: series
            };

            var myChart = echarts.init(document.getElementById('echarts-d'));
            myChart.setOption(option);

            /**
             * 个性化地图设置
             * 找到已发布的个性化地图
             * 复制样式ID: 91128690644e24bc5818013fc0f42cf7
             * 需配合 ak 秘钥使用
             *
             * http://lbsyun.baidu.com/apiconsole/key
             */
            var bmap = null;
            var ecModel = myChart._model;
            ecModel.eachComponent('bmap', function(bmapModel) {
                //if(bmap == null) {
                bmap = bmapModel.__bmap;
                //}
            })
            bmap.setMapStyleV2({
                styleId: '91128690644e24bc5818013fc0f42cf7'
            });

            /**
             * 地图放大缩小的调用
             */
            bmap.addEventListener("zoomend", function(e) {
                var zoom = bmap.getZoom();
                if(zoom < 7) {
                    $(".css-city-name").hide()
                } else {
                    $(".css-city-name").show()
                }
            });

            /**
             * 地图创建dom的方法
             */
            getCurrentArea();
            function getCurrentArea() {
                var data = {
                    "location": "辽宁",
                    "cities": [
                        {
                            "name": "沈阳",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "大连",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "鞍山",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "抚顺",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "本溪",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "丹东",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "锦州",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "营口",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "阜新",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "辽阳",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "盘锦",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "铁岭",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "朝阳",
                            "value": {
                                "value1": 12321,
                                "value2": 123123,
                                "value3": 777
                            }
                        }, {
                            "name": "葫芦岛",
                            "value": {
                                "value1": 121,
                                "value2": 123,
                                "value3": 7
                            }
                        }
                    ]
                };
                // 获取坐标数组
                var _area = geoCoordMap[data.location];
                // console.log( _area );
                bmap.centerAndZoom(new BMap.Point(_area[0], _area[1]), 8);
                clearPly();
                var cities = data.cities;
                for(var i = 0; i < cities.length; i++) {
                    // 创建地级市的覆盖物
                    getBoundary(cities[i].name);
                    // 生成提示文字
                    var _text = "<div class='css-city-name' data-value1='" + cities[i].value.value1 + "' data-value2='" + cities[i].value.value2 + "' data-value3='" + cities[i].value.value3 + "'><span class='js-city-name'>" + cities[i].name + "</span><br/>33<div>"
                    addLabel(_text, geoCoordMap[cities[i].name]);
                }
            }

            /**
             * 创建地级市的覆盖物 存储器
             * 1.清空创建地级市的覆盖物
             * 
             */
            var MAPPLY={};
            function clearPly(){
                MAPPLY={};
            }
            /**
             * 创建地级市的覆盖物
             */
            function getBoundary(name) {
                var bdary = new BMap.Boundary();
                bdary.get(name, function(rs) { // 获取行政区域
                    var count = rs.boundaries.length; // 行政区域的点有多少个
                    if(count === 0) {
                        console.log('未能获取当前输入行政区域'+name);
                        return;
                    }
                    if  (name=="沈阳"){
                        count=1
                    }
                    for(var i = 0; i < count; i++) {
                        // 循环创建了 创建地级市的覆盖物
                        MAPPLY[name]= new BMap.Polygon(rs.boundaries[i], { strokeWeight: 1, strokeColor: "#36ddf1", strokeStyle: "dashed", fillColor: "rgba(255,255,255,0.1)", strokeOpacity: 0.2 }); //建立多边形覆盖物
                        bmap.addOverlay(MAPPLY[name]); //添加覆盖物
                    }             
                });
            };
            /**
             * 生成label标签
             */
            function addLabel(text, point) {
                var opts = {
                    position: new BMap.Point(point[0], point[1]), // 指定文本标注所在的地理位置
                    offset: new BMap.Size(-10, -30) //设置文本偏移量
                }
                var label = new BMap.Label(text, opts); // 创建文本标注对象
                label.setStyle({
                    color: "white",
                    fontSize: "12px",
                    fontFamily: "微软雅黑",
                    backgroundColor: "rgba(0,0,0,0)",
                    border: "none",
                    textAlign: "center",
                    cursor: "pointer",
                    zIndex :"999"
                });
                label.addEventListener("mouseover", function(e) {
                    var $obj=$(e.target.content);
                    var city=$obj.find(".js-city-name").text();
                    var ply= MAPPLY[city];

                    if (ply==undefined){
                        return
                    }
                    ply.setFillColor("rgba(255,255,255,0.5)")
                    var position={
                        left:e.screenX+30,
                        top:e.screenY-20
                    }
                    var text="<p>安全事件:&nbsp;"+ numberFormatter($obj.data("value1"))
                            +"</p><p>"+ "漏洞扫描:&nbsp;"+ numberFormatter($obj.data("value2"))
                            +"</p><p>"+ "网络攻击:&nbsp;"+ numberFormatter($obj.data("value3")) +"</p>";
                    /**
                     * 生成提示的dom
                     */
                    var $obj = $("<div class='css-page-tips'><div class='css-page-tips-in'></div></div>");
                    $obj.find(".css-page-tips-in").html(text);
                    $obj.css({
                        "left": position.left,
                        "top": position.top
                    });
                    $("body").append($obj);
                })
                label.addEventListener("mouseout", function(e) {
                    var $obj = $(e.target.content)
                    var city = $obj.find(".js-city-name").text();
                    var ply = MAPPLY[city]
                    if (ply==undefined){
                        return
                    }           
                    ply.setFillColor("rgba(255,255,255,0.1)");
                    // 删除提示dom
                    $(".css-page-tips").remove();
                })
                label.addEventListener("click", function(e) {
                    console.log(e);
                });
                label.setZIndex(99999999999)
                bmap.addOverlay(label);
            }
            /**
             * 数字的格式转换
             */
            function numberFormatter(n) {
                if(n == "-") {
                    return n;
                }
                var _n;
                if(typeof(n) == "number") {
                    _n = n
                } else {
                    _n = parseFloat(n);
                }
                var _s = _n.toString();
                var _smallP = "";
                if(_s.indexOf(".") >= 0) {
                    _smallP = _s.substring(_s.indexOf("."), _s.length);
                    _s = _s.substring(0, _s.indexOf("."));
                }
                var _f;
                if(_s.length < 5) {
                    _f = _s + _smallP;
                } else if(_s.length >= 5 && _s.length < 9) {
                    _f = (_n / 10000).toFixed(1);
                    var _m = _f.split(".");
                    if(_m[1] == 0) {
                        _f = _m[0] + "万";
                    } else {
                        _f = _f + "万";
                    }
                } else if(_s.length >= 9 && _s.length < 13) {
                    _f = (_n / 100000000).toFixed(1);
                    var _m = _f.split(".");
                    if(_m[1] == 0) {
                        _f = _m[0] + "亿";
                    } else {
                        _f = _f + "亿";
                    }
                } else if(_s.length >= 13) {
                    _f = (_n / 1000000000000).toFixed(1);
                    var _m = _f.split(".");
                    if(_m[1] == 0) {
                        _f = _m[0] + "万亿";
                    } else {
                        _f = _f + "万亿";
                    }
                }
                return _f;
            }
        });
    </script>

</body>
</html>
