function TemplateFun(){if(!this instanceof TemplateFun)return new TemplateFun;this.headerMenuWidth=10}function zTreeBeforeClick(e,t){var c=t&&!t.isParent;return c||alert("只能选择城市..."),c}function zTreeOnClick(e,t,c){var a=$.fn.zTree.getZTreeObj(t).getSelectedNodes(),o="";a.sort(function(e,t){return e.id-t.id});for(var l=0,i=a.length;l<i;l++)o+=a[l].name+",";o.length>0&&(o=o.substring(0,o.length-1));$("#"+t).closest(".select-ztree").children(".select-ztree-input").attr("value",o),$(".select-ztree-dropdown").slideUp("fast")}function zTreeShowMenu(e,t){window.event?event.cancelBubble=!0:t.stopPropagation(),$(e).next().slideDown("fast")}function zTreeSearchNode(e,t,c,a){var o=$.fn.zTree.init($("#"+e),c,a),l=$("#"+t).val();if(""!=l){for(var i=o.getNodesByParamFuzzy("name",l),r=o.transformToArray(o.getNodes()),n=0;n<r.length;n++)r[n].highlight=!1,o.updateNode(r[n]);if(0!==i.length)for(n=0;n<i.length;n++)i[n].highlight=!0,o.updateNode(i[n]),o.expandNode(i[n].getParentNode(),!0);else alert("没有您要搜索的内容")}}function zTreeSetHighlight(e,t){return t.highlight?{color:"green","font-weight":"bold","background-color":"#ddd"}:{color:"#000","font-weight":"normal"}}function zTreeDropdownClose(){$(".select-ztree-dropdown").slideUp("fast")}function zTreeDropdownConfirm(e,t,c){var a=$.fn.zTree.getZTreeObj(e).getCheckedNodes(),o="",l="",i=a.length-1;console.log(a),c?a.forEach(function(e,t){e.children||(t===i?(o+=e.name,l+=e.id):(o+=e.name+",",l+=e.id+","))}):a.forEach(function(e,t){t===i?(o+=e.name,l+=e.id):(o+=e.name+",",l+=e.id+",")}),$(t).val(o).text(o).attr("data-id",l),zTreeDropdownClose()}$(function(){templatefn.headerMenuWidthfn(),templatefn.headerBarTogglefn(),$(window).on("resize",function(e){e.preventDefault(),templatefn.headerBarTogglefn()}),$(document).on("click",".header-pane-toggle",function(e){var t=$(".header-menu"),c=$(".header-pane").width(),a=0;$(this).hasClass("active")?((a=Math.abs(t.position().left)-c)<0&&(a=0,$(this).removeClass("active")),t.animate({left:-a},500)):((a=Math.abs(t.position().left)+c)>t.width()-c&&(a=t.width()-c,$(this).addClass("active")),t.animate({left:-a},500))}),templatefn.wrapperHeightfn()}),$(function(){if($('[data-toggle="left-nav"]').mocLeftNav&&$('[data-toggle="left-nav"]').mocLeftNav({activeCls:"active"}),$(document).mocCheck){var winH=$(window).height()-140;new mocFixedtable('[data-toggle="mocFixedtable"]',{width:"100%",height:winH,rowspan:"false",colspan:"false",thead:"true",tfoot:"false"})}if($(document).mocWordLength&&$('[data-toggle="wordLength"]').mocWordLength(),$(document).mocPlaceholder&&$(".input-box input, .textarea-box textarea").mocPlaceholder(),$(function(){$('[mocLightBox="init"]').mocLightBox()}),$(".textarea-autosize").length>0&&(autosize($(".textarea-autosize")),autosize($(".textarea-automax"))),$(".icheck-primary").iCheck){$(".icheck-primary").iCheck({checkboxClass:"checkbox-primary",radioClass:"radio-primary"}),$(".icheck-success").iCheck({checkboxClass:"checkbox-success",radioClass:"radio-success"});var checkAll=$('[ichecked-for][type="checkbox"]');$(document).on("ifChecked ifUnchecked",'[ichecked-for][type="checkbox"]',function(e){var t=$(this).attr("ichecked-for"),c=$('[ichecked-val="'+t+'"]');"ifChecked"===e.type?c.not("[disabled]").iCheck("check"):c.not("[disabled]").iCheck("uncheck")}),$(document).on("ifChecked ifUnchecked",'[ichecked-val][type="checkbox"]',function(e){if($(this).attr("old-name")&&" "!=$(this).attr("old-name")){var t=$(this).attr("old-name"),c=$(this).closest("td,th").attr("fixedtable-clone-id"),a=$('[fixedtable-id="'+c+'"]');"ifChecked"==e.type?a.find('[name="'+t+'"]').iCheck("check"):a.find('[name="'+t+'"]').iCheck("uncheck")}if(checkAll.length>0){var o=$(this).attr("ichecked-val"),l=$('[ichecked-for="'+o+'"]');if(1==l.length&&void 0!=l.attr("ichecked-for")){var i=$('[ichecked-val="'+o+'"]');i.not("[disabled]").filter(":checked").length==i.not("[disabled]").length?l.iCheck("check"):(l.prop("checked",!1),l.parent().removeClass("checked").attr("aria-checked","false")),l.iCheck("update")}}})}if($(document).mocCheck&&($(".mocCheck-simple").mocCheck(),$(".mocCheck-ball").mocCheck({theme:"mocCheck-simple-primary"}),$(".mocCheck-bootstrap").mocCheck({type:"strap"}),$(".mocCheck-button").mocCheck({type:"button"})),$(".select-2").select2&&($(".select-2").select2({placeholder:"请选择"}),$(".select-2ns").select2({minimumResultsForSearch:1/0,placeholder:"请选择"}),$(".select-2nc").select2({closeOnSelect:!1,placeholder:"请选择"}),$(".select-2nc-tag").select2({tags:!0,closeOnSelect:!1,placeholder:"请选择"}),$(".select-2tag").select2({tags:!0,placeholder:"请选择"})),$("form").Validform){var ValidformDom=$('[data-Validform="Validform"]'),ignoreHidden="false"!==ValidformDom.attr("ignoreHidden");ValidformDom.Validform({btnSubmit:"#validFormSubmit",btnReset:"#validFormReset",ignoreHidden:ignoreHidden,dragonfly:!1,tipSweep:!1,showAllError:!0,label:".Validform_label",postonce:!1,ajaxPost:!1,tiptype:function(e,t,c){var a=t.obj.closest(".form-content").find(".form-checktip");c(a,t.type),a.text(e)},beforeCheck:function(curform){var beforeCheckFn=eval(ValidformDom.attr("data-beforeCheck"));if("function"==typeof beforeCheckFn){var flag=beforeCheckFn(curform);if(!1===flag)return!1}},beforeSubmit:function(curform){var beforeSubmitFn=eval(ValidformDom.attr("data-beforeSubmit"));if("function"==typeof beforeSubmitFn){var flag=beforeSubmitFn(curform);if(!1===flag)return!1}},callback:function(data){var callbackFn=eval(ValidformDom.attr("data-callback"));if("function"==typeof callbackFn){var flag=callbackFn(data);if(!1===flag)return!1}}}).ignore('[disabled="true"],[ignore="yes"]'),$(".select-2, .select-2ns, .select-2nc, .select-2-template, .select-2ns-template, .select-2nc-template, .select-2-call, .select-2ns-call, .select-2nc-call").on("change",function(e){$(this).blur()}),$(".icheck-primary, .icheck-primary-template, .icheck-primary-call").on("ifChanged",function(e){$(this).blur()})}$("[data-toggle='tooltip']").tooltip&&$("[data-toggle='tooltip']").tooltip(),$("[data-toggle='popover']").popover&&$("[data-toggle='popover']").popover(),$('[data-toggle="dropdown"]').dropdown&&$('[data-toggle="dropdown"]').dropdown(),$(document).draggable&&($(".modal-draggable").draggable({handle:".modal-header"}),$(".mocAlert").draggable({handle:".mocAlert_head"})),$.mocGoTop&&$.mocGoTop()}),TemplateFun.prototype={headerMenuWidthfn:function(){var e=this;$(".header-menu-item").each(function(t,c){e.headerMenuWidth+=$(c).mocActual("outerWidth",{includeMargin:!0})}),$(".header-menu").width(e.headerMenuWidth)},headerBarTogglefn:function(){var e=$(".header-pane").width();$(".header-menu").width()>e?$(".header-pane-toggle").show():$(".header-pane-toggle").hide()},wrapperHeightfn:function(){var e=$(window).height()-$("#page-header").outerHeight()-$("#page-footer").outerHeight();$("#wrapper").css("min-height",e)},formRoutineCall:function(e){e?($(".icheck-primary").iCheck&&($(e).find(".icheck-primary-call").iCheck({checkboxClass:"checkbox-primary",radioClass:"radio-primary"}),$(e).find(".icheck-success-call").iCheck({checkboxClass:"checkbox-success",radioClass:"radio-success"})),$(".select-2").select2&&($(e).find(".select-2-call").select2({placeholder:"请选择"}),$(e).find(".select-2ns-call").select2({minimumResultsForSearch:1/0,placeholder:"请选择"}),$(e).find(".select-2nc-call").select2({closeOnSelect:!1,placeholder:"请选择"})),$(".mocCheck-simple").mocCheck&&($(e).find(".mocCheck-simple-call").mocCheck(),$(e).find(".mocCheck-ball-call").mocCheck({theme:"primary"}),$(e).find(".mocCheck-bootstrap-call").mocCheck({type:"strap"}))):($(".icheck-primary").iCheck&&($(".icheck-primary-call").iCheck({checkboxClass:"checkbox-primary",radioClass:"radio-primary"}),$(".icheck-success-call").iCheck({checkboxClass:"checkbox-success",radioClass:"radio-success"})),$(".select-2").select2&&($(".select-2-call").select2({placeholder:"请选择"}),$(".select-2ns-call").select2({minimumResultsForSearch:1/0,placeholder:"请选择"}),$(".select-2nc-call").select2({closeOnSelect:!1,placeholder:"请选择"})),$(".mocCheck-simple").mocCheck&&($(".mocCheck-simple-call").mocCheck(),$(".mocCheck-ball-call").mocCheck({theme:"primary"}),$(".mocCheck-bootstrap-call").mocCheck({type:"strap"})))},template:function(e){$(".moc-page-Loading").remove(),$("body").removeClass("moc-page-Loading-show")}},window.templatefn=new TemplateFun;